{% extends "base.html" %}

{% block content %}

    {% load staticfiles %}

    {# General #}
    <div class="page-header text-center">
        <h2>Personal info</h2>
    </div>
    <div class="row">
        <div id="person" class="col-3 col-lg-offset-5" data-id="{{ person.id }}">
            <img src="https://graph.facebook.com/{{ person.fb_id }}/picture?type=large" alt="{{ friend.first_name }} {{ friend.last_name }}">
            <ul>
                <li>First name: {{ person.first_name }}</li>
                <li>Middle name: {{ person.middle_name }}</li>
                <li>Last name: {{ person.last_name }}</li>
                <li>Gender: {{ person.gender }}</li>
                <li>Birthday: {{ person.birthday }}</li>
            </ul>
        </div>
    </div>

    {# General #}
    <div class="page-header text-center">
        <h2>General</h2>
    </div>
    <div class="row">
        <div class="col-4 col-lg-offset-4">
            <div class="box">
                <div class="box-header">
                    <span class="large-text">Friends</span>
                </div>
                <div class="box-content">
                    <div class="box-col-2">
                        <img src="{% static "img/male.jpg" %}" alt="My image"/><br>
                        <span class="large-text">{{ person.male_friends_percentage|floatformat:0 }}%</span><br>
                        <span class="small-text">({{ person.male_friends|length }}/{{ person.friends|length }})</span>
                    </div>
                    <div class="box-col-2">
                        <img src="{% static "img/female.jpg" %}" alt="My image"/><br>
                        <span class="large-text">{{ person.female_friends_percentage|floatformat:0 }}%</span><br>
                        <span class="small-text">({{ person.female_friends|length }}/{{ person.friends|length }})</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

   {# Demographics #}
    <div class="page-header text-center">
        <h2>Demographics</h2>
    </div>
    <div class="row">
         <div class="col-12 text-center">
            <div id="report-demographics-buttons" class="btn-group">
                <button data-url="percentages" type="button" class="btn btn-default active">Percentages</button>
                <button data-url="totals" type="button" class="btn btn-default">Totals</button>
            </div>
        </div>
        <div class="col-12">
            <div id="demographics-chart"></div>
            <script>
                var reportMaleAges = [];
                var reportFemaleAges = [];
                {% for male_age in male_ages %}
                    reportMaleAges.push({{ male_age }})
                {% endfor %}
                {% for female_age in female_ages %}
                    reportFemaleAges.push({{ female_age }})
                {% endfor %}
            </script>
        </div>
    </div>
    <div class="row">
        <div class="col-4">
            <div class="box">
                <div class="box-header">
                    <span class="large-text">Youngest</span>
                </div>
                <div class="box-content">
                    <div class="box-col-2 box-blue">
                        <span class="large-text">{{ youngest_male.age }}</span><br>
                        <span class="small-text">({{ youngest_male.name|truncatechars:25 }})</span>
                    </div>
                    <div class="box-col-2 box-pink">
                        <span class="large-text">{{ youngest_female.age }}</span><br>
                        <span class="small-text">({{ youngest_female.name|truncatechars:25 }})</span>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-4">
            <div class="box">
                <div class="box-header">
                    <span class="large-text">Average</span>
                </div>
                <div class="box-content">
                    <div class="box-col-2 box-blue">
                        <span class="large-text">{{ youngest_male.age }}</span><br>
                        <span class="small-text">({{ person.male_friends|length }} males)</span>
                    </div>
                    <div class="box-col-2 box-pink">
                        <span class="large-text">{{ youngest_female.age }}</span><br>
                        <span class="small-text">({{ person.female_friends|length }} females)</span>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-4">
            <div class="box">
                <div class="box-header">
                    <span class="large-text">Oldest</span>
                </div>
                <div class="box-content">
                    <div class="box-col-2 box-blue">
                        <span class="large-text">{{ oldest_male.age }}</span><br>
                        <span class="small-text">({{ oldest_male.name|truncatechars:25 }})</span>
                    </div>
                    <div class="box-col-2 box-pink">
                        <span class="large-text">{{ oldest_female.age }}</span><br>
                        <span class="small-text">({{ oldest_female.name|truncatechars:25 }})</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    {# Age #}
    <div class="page-header text-center">
        <h2>Age</h2>
    </div>
    <div class="row">
        <div class="col-6">
            <h3>Youngest</h3>
            <ol>
            {% for friend in youngest_friends %}
                <li>
                    <img src="https://graph.facebook.com/{{ friend.fb_id }}/picture" width="30">
                    {{ friend.first_name }} {{ friend.last_name }} ({{ friend.age }} years)
                </li>
            {% endfor %}
            </ol>
        </div>
        <div class="col-6">
            <h3>Oldest</h3>
            <ol>
            {% for friend in oldest_friends %}
                <li>
                    <img src="https://graph.facebook.com/{{ friend.fb_id }}/picture" width="30">
                    {{ friend.first_name }} {{ friend.last_name }} ({{ friend.age }} years)
                </li>
            {% endfor %}
            </ol>
        </div>
    </div>

   {# Relationships #}
    <div class="page-header text-center">
        <h2>Relationships</h2>
    </div>
    <div class="row">
         <div class="col-12 text-center">
            <div id="report-relationship-buttons" class="btn-group">
                <button data-url="percentages" type="button" class="btn btn-default active">Percentages</button>
                <button data-url="totals" type="button" class="btn btn-default">Totals</button>
            </div>
        </div>
        <div class="col-12">
            <div id="relationships-chart"></div>
            <script>
                var reportMaleRelationships = [];
                var reportFemaleRelationships = [];
                {% for male_relationship in male_relationships %}
                    reportMaleRelationships.push("{{ male_relationship }}")
                {% endfor %}
                {% for female_relationship in female_relationships %}
                    reportFemaleRelationships.push("{{ female_relationship }}")
                {% endfor %}
            </script>
        </div>
    </div>

    {# Map #}
    <div class="page-header text-center">
        <h2>Locations</h2>
    </div>
    <div id="report-locations" class="row">
        <div class="col-12 text-center">
            <div id="report-locations-buttons" class="btn-group">
                <button data-url="top-travels" type="button" class="btn btn-default active">Your travels</button>
                <button data-url="furthest-friends" type="button" class="btn btn-default">Furthest hometowns</button>
                <button data-url="top-travel-friends" type="button" class="btn btn-default">Top travelers</button>
            </div>
        </div>
    </div>
    <div class="row">
        <div id="map-canvas"></div>
    </div>

{% endblock %}

{# Javascript files #}
{% block js-foot %}
    {{ block.super }}
    <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false"></script>
    {% load staticfiles %}
    <script src="{% static "js/report.js" %}"></script>
    <script src="{% static "js/highcharts.js" %}"></script>
{% endblock %}